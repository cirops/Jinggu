parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VRyS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawMap=exports.drawPlayer=void 0;var e=require("."),r=function(){e.context.drawImage(e.player.sprite.image,e.player.x,e.player.y)};exports.drawPlayer=r;var a=function(){for(var r=function(r){for(var a=function(a){e.gameMap.tiles[r][a].sprites.forEach(function(t){e.context.drawImage(t.image,32*a,32*r)})},t=0;t<e.gameMap.tiles[0].length;t+=1)a(t)},a=0;a<e.gameMap.tiles.length;a+=1)r(a)};exports.drawMap=a;
},{".":"B6dB"}],"yNom":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameMap=void 0;var e=function(){return function(e){this.tiles=e}}();exports.GameMap=e;
},{}],"UldJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGridDistance=void 0;var t=function(t,e,o,r){return{x:Math.floor(t/32)-Math.floor(o/32),y:Math.floor(e/32)-Math.floor(r/32)}};exports.getGridDistance=t;
},{}],"alQi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=exports.Direction=void 0;var e,t=require("."),i=require("./utils");exports.Direction=e,function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(e||(exports.Direction=e={}));var r=function(){return function(r,a){var n=this;this.walking=!1,this.dancing=!1,this.traveling=!1,this.travelDestination={x:0,y:0},this.sprite=t.spriteLibrary[3482],this.level=50,this.speed=Math.max(800-5*this.level,200),this.move=function(i){var r,a=n.x/32,s=n.y/32;switch(i){case e.Up:r=[a,s-1];break;case e.Down:r=[a,s+1];break;case e.Left:r=[a-1,s];break;case e.Right:r=[a+1,s]}if(t.gameMap.tiles[r[1]][r[0]].walkable&&!n.walking){switch(i){case e.Up:if(0===n.y)return;n.animateWalk("y",-1,3485);break;case e.Down:if(n.y===t.WINDOW_HEIGHT-32)return;n.animateWalk("y",1,3482);break;case e.Left:if(0===n.x)return;n.animateWalk("x",-1,3491);break;case e.Right:if(n.x===t.WINDOW_WIDTH-32)return;n.animateWalk("x",1,3488)}n.walking=!0,setTimeout(function(){return n.walking=!1},n.speed)}},this.dance=function(i){if(!n.walking&&!n.dancing){switch(i){case e.Up:n.sprite=t.spriteLibrary[3485];break;case e.Down:n.sprite=t.spriteLibrary[3482];break;case e.Left:n.sprite=t.spriteLibrary[3491];break;case e.Right:n.sprite=t.spriteLibrary[3488]}n.dancing=!0,setTimeout(function(){return n.dancing=!1},50)}},this.animateWalk=function(e,i,r){var a=[t.spriteLibrary[r+1],t.spriteLibrary[r+2]],s=0,o=setInterval(function(){return n[e]=n[e]+4*i},n.speed/8),c=setInterval(function(){s===a.length&&(s=0),n.sprite=a[s],s+=1},n.speed/8);setTimeout(function(){clearInterval(o),clearInterval(c),n.sprite=t.spriteLibrary[r]},n.speed)},this.setTravelDestination=function(e,t){n.travelDestination={x:e,y:t}},this.travel=function(){var t=(0,i.getGridDistance)(n.travelDestination.x,n.travelDestination.y,n.x,n.y);0!==t.x||0!==t.y?t.x>0?n.move(e.Right):t.x<0?n.move(e.Left):t.y>0?n.move(e.Down):t.y<0&&n.move(e.Up):n.traveling=!1},this.x=r,this.y=a}}();exports.Player=r;
},{".":"B6dB","./utils":"UldJ"}],"Pk7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkKeyPress=exports.checkClick=exports.inputsSetup=void 0;var e=require("."),r=require("./Player"),t={},a=function(){window.addEventListener("keydown",n,!1),window.addEventListener("keyup",i,!1),window.addEventListener("click",o,!1)};exports.inputsSetup=a;var i=function(e){delete t[e.key]},o=function(r){Math.floor(e.player.x/32)===Math.floor(r.clientX/32)&&Math.floor(e.player.y/32)===Math.floor(r.clientY/32)||e.player.traveling||(e.player.setTravelDestination(r.clientX,r.clientY),e.player.traveling=!0,e.player.travel())};exports.checkClick=o;var n=function(a){t[a.key]=!0;var i=a.key;if(t.Control)switch(i){case"ArrowLeft":e.player.dance(r.Direction.Left);break;case"ArrowUp":e.player.dance(r.Direction.Up);break;case"ArrowRight":e.player.dance(r.Direction.Right);break;case"ArrowDown":e.player.dance(r.Direction.Down)}else switch(i){case"Escape":e.player.traveling&&(e.player.traveling=!1);break;case"ArrowLeft":e.player.move(r.Direction.Left);break;case"ArrowUp":e.player.move(r.Direction.Up);break;case"ArrowRight":e.player.move(r.Direction.Right);break;case"ArrowDown":e.player.move(r.Direction.Down)}};exports.checkKeyPress=n;
},{".":"B6dB","./Player":"alQi"}],"rlJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadSprites=exports.Sprite=void 0;var e=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{u(i.next(e))}catch(t){a(t)}}function l(e){try{u(i.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,l)}u((i=i.apply(e,t||[])).next())})},t=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},n=function(){return function(e,t,n){this.id=e,this.walkable=t,this.image=n}}();exports.Sprite=n;var i=function(n){return e(void 0,void 0,void 0,function(){return t(this,function(e){return[2,new Promise(function(e,t){var i="./sprites/"+n+".png",r=new Image;r.src=i,r.onload=function(){var t=document.createElement("canvas");t.width=32,t.height=32;var n=t.getContext("2d");n.drawImage(r,0,0);for(var i=n.getImageData(0,0,32,32),a=i.data,o=0;o<a.length;o+=4)if(0!==a[o+3]){var l=a[o],u=a[o+1],c=a[o+2];255===l&&0===u&&255===c&&(a[o+3]=0)}n.putImageData(i,0,0);var d=t.toDataURL("image/png"),s=new Image;s.src=d,e(s)},r.onerror=function(e){console.error("error",e),t(e)}})]})})},r=function(){return e(void 0,void 0,void 0,function(){var r,a,o;return t(this,function(l){switch(l.label){case 0:return a=[{id:43},{id:79,walkable:!1},{id:80,walkable:!1},{id:85,walkable:!1},{id:86,walkable:!1},{id:339,walkable:!1},{id:1049,walkable:!1},{id:1203,walkable:!1},{id:1204},{id:1548},{id:1575},{id:1595,walkable:!1},{id:1596,walkable:!1},{id:1597,walkable:!1},{id:1598,walkable:!1},{id:2933},{id:2934},{id:2935},{id:2936},{id:3482},{id:3483},{id:3484},{id:3485},{id:3486},{id:3487},{id:3488},{id:3489},{id:3490},{id:3491},{id:3492},{id:3493}].map(function(r){return e(void 0,void 0,void 0,function(){var e,a,o;return t(this,function(t){switch(t.label){case 0:return e=n.bind,a=[void 0,r.id,null===(o=r.walkable)||void 0===o||o],[4,i(r.id)];case 1:return[2,new(e.apply(n,a.concat([t.sent()])))]}})})}),[4,Promise.all(a)];case 1:return r=l.sent(),o={},r.forEach(function(e){o[e.id]=e}),[2,o]}})})};exports.loadSprites=r;
},{}],"d5jW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var e=function(){return function(e,t,i){this.x=e,this.y=t,this.sprites=i,this.walkable=i.every(function(e){return e.walkable})}}();exports.Tile=e;
},{}],"E4rt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadMap=void 0;var r=require("."),e=require("./Tile"),o=function(){for(var o=[[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1204],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,2933],[43,2934],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,2935],[43,2936],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43,1548],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049]],[[43],[43],[43,1203],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43,1575],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1203],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1203],[43],[43],[43],[43],[43],[43],[43],[43,1049],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1203],[43],[43],[43],[43],[43],[43],[43],[43,1203],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1595],[43,1596],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1203],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43,1203],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1597],[43,1598],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1203],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43,1203],[339,79],[339,85],[339,85],[339,85]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[339,79],[339,85],[339,85],[339,85],[339,85],[339,85],[339,85],[339,85],[339,80],[339],[339],[339]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[339,86],[339],[339],[339],[339],[339],[339],[339],[339],[339],[339],[339]],[[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[43],[339,86],[339],[339],[339],[339],[339],[339],[339],[339],[339],[339],[339]]],t=[],a=0;a<24;a+=1){for(var i=[],u=0;u<42;u+=1){var p=o[a][u],s=new e.Tile(a,u,p.map(function(e){return r.spriteLibrary[e]}));i.push(s)}t.push(i)}return t};exports.loadMap=o;
},{".":"B6dB","./Tile":"d5jW"}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spriteLibrary=exports.gameMap=exports.player=exports.context=exports.canvas=exports.WINDOW_HEIGHT=exports.WINDOW_WIDTH=void 0;var e=require("./draw"),t=require("./GameMap"),r=require("./input"),n=require("./Player"),o=require("./sprites"),i=require("./map"),a=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,u)}s((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},s=1344;exports.WINDOW_WIDTH=s;var c=768;exports.WINDOW_HEIGHT=c;var l,p,f,d,v=document.createElement("canvas");exports.canvas=v,exports.context=l,exports.player=p,exports.gameMap=f,exports.spriteLibrary=d;var x=function(){return a(void 0,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return v.width=s,v.height=c,exports.context=l=v.getContext("2d"),document.body.insertBefore(v,document.body.childNodes[0]),[4,(0,o.loadSprites)()];case 1:return exports.spriteLibrary=d=e.sent(),exports.player=p=new n.Player(s/2,c/2),exports.gameMap=f=new t.GameMap((0,i.loadMap)()),(0,r.inputsSetup)(),[2]}})})},h=function(){return a(void 0,void 0,void 0,function(){return u(this,function(t){return(0,e.drawMap)(),(0,e.drawPlayer)(),p.traveling&&p.travel(),[2]})})},y=function(e){return new Promise(function(t){return setTimeout(t,e)})},w=100,b=function e(){return a(void 0,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return h(),[4,y(w)];case 1:return t.sent(),window.requestAnimationFrame(e),[2]}})})};a(void 0,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),b(),window.requestAnimationFrame(b),[2]}})});
},{"./draw":"VRyS","./GameMap":"yNom","./input":"Pk7j","./Player":"alQi","./sprites":"rlJt","./map":"E4rt"}]},{},["B6dB"], null)
//# sourceMappingURL=src.9929cfb7.js.map