parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"VRyS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawPlayer=exports.drawBackground=void 0;var r=require("."),e=function(){for(var e=0;e<r.WINDOW_WIDTH;e+=32)for(var a=0;a<r.WINDOW_HEIGHT;a+=32)r.context.drawImage(r.sprites[43],e,a)};exports.drawBackground=e;var a=function(){r.context.drawImage(r.player.sprite,r.player.x,r.player.y)};exports.drawPlayer=a;
},{".":"B6dB"}],"UldJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGridDistance=void 0;var t=function(t,e,o,r){return{x:Math.floor(t/32)-Math.floor(o/32),y:Math.floor(e/32)-Math.floor(r/32)}};exports.getGridDistance=t;
},{}],"alQi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=exports.Direction=void 0;var e,t=require("."),i=require("./utils");exports.Direction=e,function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(e||(exports.Direction=e={}));var n=function(){return function(n,s){var r=this;this.walking=!1,this.dancing=!1,this.traveling=!1,this.travelDestination={x:0,y:0},this.sprite=t.sprites[3482],this.level=1,this.speed=Math.max(800-5*this.level,200),this.move=function(i){if(!r.walking){switch(i){case e.Up:if(0===r.y)return;r.animateWalk("y",-1,3485);break;case e.Down:if(r.y===t.WINDOW_HEIGHT-32)return;r.animateWalk("y",1,3482);break;case e.Left:if(0===r.x)return;r.animateWalk("x",-1,3491);break;case e.Right:if(r.x===t.WINDOW_WIDTH-32)return;r.animateWalk("x",1,3488)}r.walking=!0,setTimeout(function(){return r.walking=!1},r.speed)}},this.dance=function(i){if(!r.walking&&!r.dancing){switch(i){case e.Up:r.sprite=t.sprites[3485];break;case e.Down:r.sprite=t.sprites[3482];break;case e.Left:r.sprite=t.sprites[3491];break;case e.Right:r.sprite=t.sprites[3488]}r.dancing=!0,setTimeout(function(){return r.dancing=!1},50)}},this.animateWalk=function(e,i,n){var s=[t.sprites[n+1],t.sprites[n+2]],a=0,o=setInterval(function(){return r[e]=r[e]+4*i},r.speed/8),c=setInterval(function(){a===s.length&&(a=0),r.sprite=s[a],a+=1},r.speed/8);setTimeout(function(){clearInterval(o),clearInterval(c),r.sprite=t.sprites[n]},r.speed)},this.setTravelDestination=function(e,t){r.travelDestination={x:e,y:t}},this.travel=function(){var t=(0,i.getGridDistance)(r.travelDestination.x,r.travelDestination.y,r.x,r.y);0!==t.x||0!==t.y?t.x>0?r.move(e.Right):t.x<0?r.move(e.Left):t.y>0?r.move(e.Down):t.y<0&&r.move(e.Up):r.traveling=!1},this.x=n,this.y=s}}();exports.Player=n;
},{".":"B6dB","./utils":"UldJ"}],"Pk7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkKeyPress=exports.checkClick=exports.inputsSetup=void 0;var e=require("."),r=require("./Player"),t={},a=function(){window.addEventListener("keydown",n,!1),window.addEventListener("keyup",i,!1),window.addEventListener("click",o,!1)};exports.inputsSetup=a;var i=function(e){delete t[e.key]},o=function(r){Math.floor(e.player.x/32)===Math.floor(r.clientX/32)&&Math.floor(e.player.y/32)===Math.floor(r.clientY/32)||e.player.traveling||(e.player.setTravelDestination(r.clientX,r.clientY),e.player.traveling=!0,e.player.travel())};exports.checkClick=o;var n=function(a){t[a.key]=!0;var i=a.key;if(t.Control)switch(i){case"ArrowLeft":e.player.dance(r.Direction.Left);break;case"ArrowUp":e.player.dance(r.Direction.Up);break;case"ArrowRight":e.player.dance(r.Direction.Right);break;case"ArrowDown":e.player.dance(r.Direction.Down)}else switch(i){case"Escape":e.player.traveling&&(e.player.traveling=!1);break;case"ArrowLeft":e.player.move(r.Direction.Left);break;case"ArrowUp":e.player.move(r.Direction.Up);break;case"ArrowRight":e.player.move(r.Direction.Right);break;case"ArrowDown":e.player.move(r.Direction.Down)}};exports.checkKeyPress=n;
},{".":"B6dB","./Player":"alQi"}],"rlJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadSprites=void 0;var e=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,u)}c((r=r.apply(e,t||[])).next())})},t=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},n=function(n){return e(void 0,void 0,void 0,function(){return t(this,function(e){return[2,new Promise(function(e,t){var r="./sprites/"+n+".png",o=new Image;o.src=r,o.onload=function(){var t=document.createElement("canvas");t.width=32,t.height=32;var n=t.getContext("2d");n.drawImage(o,0,0);for(var r=n.getImageData(0,0,32,32),a=r.data,i=0;i<a.length;i+=4)if(0!==a[i+3]){var u=a[i],c=a[i+1],l=a[i+2];255===u&&0===c&&255===l&&(a[i+3]=0)}n.putImageData(r,0,0);var s=t.toDataURL("image/png"),f=new Image;f.src=s,e(f)},o.onerror=function(e){console.error("error",e),t(e)}})]})})},r=function(){return e(void 0,void 0,void 0,function(){var r,o;return t(this,function(a){switch(a.label){case 0:return r={},o=[43,3482,3483,3484,3485,3486,3487,3488,3489,3490,3491,3492,3493].map(function(o){return e(void 0,void 0,void 0,function(){var e,a;return t(this,function(t){switch(t.label){case 0:return e=r,a=o,[4,n(o)];case 1:return[2,e[a]=t.sent()]}})})}),[4,Promise.all(o)];case 1:return a.sent(),[2,r]}})})};exports.loadSprites=r;
},{}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.player=exports.sprites=exports.context=exports.canvas=exports.WINDOW_HEIGHT=exports.WINDOW_WIDTH=void 0;var e=require("./draw"),t=require("./input"),r=require("./Player"),n=require("./sprites"),o=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,a)}s((n=n.apply(e,t||[])).next())})},i=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(a){i=[6,a],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u=1280;exports.WINDOW_WIDTH=u;var a=640;exports.WINDOW_HEIGHT=a;var s,c,l,p=document.createElement("canvas");exports.canvas=p,exports.context=s,exports.sprites=c,exports.player=l;var f=function(){return o(void 0,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return p.width=u,p.height=a,exports.context=s=p.getContext("2d"),document.body.insertBefore(p,document.body.childNodes[0]),[4,(0,n.loadSprites)()];case 1:return exports.sprites=c=e.sent(),exports.player=l=new r.Player(u/2,a/2),(0,t.inputsSetup)(),[2]}})})},d=function(){return o(void 0,void 0,void 0,function(){return i(this,function(t){return(0,e.drawBackground)(),(0,e.drawPlayer)(),l.traveling&&l.travel(),[2]})})},v=function(e){return new Promise(function(t){return setTimeout(t,e)})},h=100,x=function e(){return o(void 0,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return d(),[4,v(h)];case 1:return t.sent(),window.requestAnimationFrame(e),[2]}})})};o(void 0,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,f()];case 1:return e.sent(),x(),window.requestAnimationFrame(x),[2]}})});
},{"./draw":"VRyS","./input":"Pk7j","./Player":"alQi","./sprites":"rlJt"}]},{},["B6dB"], null)
//# sourceMappingURL=/src.da4c7dea.js.map